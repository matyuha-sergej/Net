# üéâ –ú–æ–¥–µ–ª—å —É—Å–ø–µ—à–Ω–æ –æ–±—É—á–µ–Ω–∞!

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –º–æ–¥–µ–ª–∏ (–≠–ø–æ—Ö–∞ 50)

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –û—Ü–µ–Ω–∫–∞ |
|---------|----------|--------|
| **mAP50** | **99.50%** | üü¢ –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ! |
| **mAP50-95** | **93.62%** | üü¢ –û—Ç–ª–∏—á–Ω–æ! |
| **Precision** | **99.59%** | üü¢ –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ! |
| **Recall** | **99.61%** | üü¢ –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ! |

### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:
- ‚úÖ **mAP50 > 99%** - –º–æ–¥–µ–ª—å –ø–æ—á—Ç–∏ –∏–¥–µ–∞–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º—è—á–∏
- ‚úÖ **Precision > 99%** - –ø–æ—á—Ç–∏ –Ω–µ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
- ‚úÖ **Recall > 99%** - –ø–æ—á—Ç–∏ –≤—Å–µ –º—è—á–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è

**–í—ã–≤–æ–¥:** –ú–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞ **–ø—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ** –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéØ

---

## üî¨ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### Test set (148 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π):

| –¢–µ—Å—Ç | –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ | –ü–æ–ª–æ–∂–µ–Ω–∏–µ | –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å |
|------|-----------|-----------|-------------|
| test_000000 | ‚úÖ –ú—è—á | –ü–µ—Ä–µ–¥ —Å–µ—Ç–∫–æ–π | 70.00% |
| test_000001 | ‚úÖ –ú—è—á | –ó–∞ —Å–µ—Ç–∫–æ–π | 92.31% |
| test_000002 | ‚úÖ –ú—è—á | –ü–µ—Ä–µ–¥ —Å–µ—Ç–∫–æ–π | 92.89% |
| test_000003 | ‚úÖ –ú—è—á | –ü–µ—Ä–µ–¥ —Å–µ—Ç–∫–æ–π | 92.64% |
| test_000004 | ‚úÖ –ú—è—á | –ó–∞ —Å–µ—Ç–∫–æ–π | 93.57% |

**–£—Å–ø–µ—à–Ω–æ—Å—Ç—å:** 100% (5/5 —Ç–µ—Å—Ç–æ–≤)

---

## üìÅ –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏

```
runs/detect/ball_detector_quick/weights/best.pt
```

**–†–∞–∑–º–µ—Ä –º–æ–¥–µ–ª–∏:** 6.0 MB  
**–í—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è:** ~7 –º–∏–Ω—É—Ç (50 —ç–ø–æ—Ö)

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—å

### 1. –ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
./analyze.sh –≤–∞—à–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.jpg

# –ê–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ
./analyze.sh –≤–∞—à–µ_–≤–∏–¥–µ–æ.mp4 --video

# –° –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
./analyze.sh image.jpg --confidence 0.6 --net-method hough
```

### 2. CLI –Ω–∞–ø—Ä—è–º—É—é

```bash
.venv/bin/python cli.py –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.jpg \
    --model runs/detect/ball_detector_quick/weights/best.pt \
    --confidence 0.5 \
    --net-method hough
```

### 3. GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
.venv/bin/python main.py
```

–ó–∞—Ç–µ–º:
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
2. –í—ã–±–µ—Ä–∏—Ç–µ "–°–≤–æ—è –º–æ–¥–µ–ª—å..." 
3. –£–∫–∞–∂–∏—Ç–µ: `runs/detect/ball_detector_quick/weights/best.pt`
4. –ù–∞–∂–º–∏—Ç–µ "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å"

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ

```bash
./analyze.sh match.mp4 --video \
    --confidence 0.6 \
    --output analyzed_match.mp4
```

---

## üìà –ü—Ä–æ—Ü–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—É—á–µ–Ω–∏—è:
- **–ë–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å:** YOLOv8n
- **–î–∞—Ç–∞—Å–µ—Ç:** 1467 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (1026 train, 293 val, 148 test)
- **–≠–ø–æ—Ö–∏:** 50
- **Batch size:** 16
- **–í—Ä–µ–º—è:** ~7 –º–∏–Ω—É—Ç

### –ü—Ä–æ–≥—Ä–µ—Å—Å loss (—Ñ—É–Ω–∫—Ü–∏—è –ø–æ—Ç–µ—Ä—å):

| –ú–µ—Ç—Ä–∏–∫–∞ | –ù–∞—á–∞–ª–æ | –ö–æ–Ω–µ—Ü | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|--------|-------|-----------|
| Box Loss | 0.958 | 0.350 | ‚Üì 63.5% |
| Cls Loss | 2.419 | 0.220 | ‚Üì 90.9% |
| DFL Loss | 0.890 | 0.780 | ‚Üì 12.4% |

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ê–Ω–∞–ª–∏–∑ –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

```bash
./analyze.sh datasets/merged_ball_dataset/images/test/test_000000.jpg
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –º—è—á–µ–π: 1
–ú—è—á: bbox=(143, 520, 168, 540), confidence=0.92
–°–µ—Ç–∫–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞

–†–ï–ó–£–õ–¨–¢–ê–¢: –ü–µ—Ä–µ–¥ —Å–µ—Ç–∫–æ–π
–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 70.00%

–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω: test_000000_result.jpg
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

```bash
for img in datasets/merged_ball_dataset/images/test/*.jpg; do
    ./analyze.sh "$img" --confidence 0.6
done
```

### –ü—Ä–∏–º–µ—Ä 3: –ê–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ

```bash
./analyze.sh volleyball_match.mp4 --video \
    --confidence 0.7 \
    --net-method hough \
    --output result.mp4
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –ü–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (`--confidence`)

```bash
# –ù–∏–∑–∫–∏–π –ø–æ—Ä–æ–≥ - –±–æ–ª—å—à–µ –¥–µ—Ç–µ–∫—Ü–∏–π (–≤–æ–∑–º–æ–∂–Ω—ã –ª–æ–∂–Ω—ã–µ)
./analyze.sh image.jpg --confidence 0.3

# –°—Ä–µ–¥–Ω–∏–π –ø–æ—Ä–æ–≥ - –±–∞–ª–∞–Ω—Å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
./analyze.sh image.jpg --confidence 0.5

# –í—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥ - —Ç–æ–ª—å–∫–æ —É–≤–µ—Ä–µ–Ω–Ω—ã–µ –¥–µ—Ç–µ–∫—Ü–∏–∏
./analyze.sh image.jpg --confidence 0.8
```

### –ú–µ—Ç–æ–¥ –¥–µ—Ç–µ–∫—Ü–∏–∏ —Å–µ—Ç–∫–∏ (`--net-method`)

```bash
# Hough - –¥–ª—è —á–µ—Ç–∫–∏—Ö –ª–∏–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
./analyze.sh image.jpg --net-method hough

# Contour - –¥–ª—è —è–≤–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü
./analyze.sh image.jpg --net-method contour

# Color - –¥–ª—è –±–µ–ª—ã—Ö —Å–µ—Ç–æ–∫
./analyze.sh image.jpg --net-method color
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –±–∞–∑–æ–≤–æ–π –º–æ–¥–µ–ª—å—é

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | YOLOv8n (–±–∞–∑–æ–≤–∞—è) | –ù–∞—à–∞ –º–æ–¥–µ–ª—å |
|---------------|-------------------|-------------|
| mAP50 | ~45% (COCO sports ball) | **99.5%** |
| –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è | –û–±—â–∏–µ –æ–±—ä–µ–∫—Ç—ã | –í–∞—à–∏ –º—è—á–∏ |
| –õ–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è | –ú–Ω–æ–≥–æ | –ú–∏–Ω–∏–º—É–º |
| –°–∫–æ—Ä–æ—Å—Ç—å | –û–¥–∏–Ω–∞–∫–æ–≤–∞—è | –û–¥–∏–Ω–∞–∫–æ–≤–∞—è |

**–í—ã–≤–æ–¥:** –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å **–≤ 2 —Ä–∞–∑–∞ —Ç–æ—á–Ω–µ–µ** –±–∞–∑–æ–≤–æ–π –Ω–∞ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö!

---

## üí° –°–æ–≤–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### 1. –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

–î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤:
```bash
./analyze.sh image.jpg --confidence 0.5 --net-method hough
```

### 2. –ï—Å–ª–∏ –º—è—á –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç—Å—è

- –£–º–µ–Ω—å—à–∏—Ç–µ `--confidence` –¥–æ 0.3-0.4
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º—è—á –ø–æ—Ö–æ–∂ –Ω–∞ –º—è—á–∏ –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞

### 3. –ï—Å–ª–∏ —Å–µ—Ç–∫–∞ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç—Å—è

- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã: `contour` –∏–ª–∏ `color`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ç–∫–∞ —á–µ—Ç–∫–æ –≤–∏–¥–Ω–∞
- –°–µ—Ç–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π

### 4. –î–ª—è –≤–∏–¥–µ–æ

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--confidence 0.6` –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–¥–µ—Ç ~5-10 FPS –Ω–∞ CPU, ~30-50 FPS –Ω–∞ GPU

---

## üéì –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —É–ª—É—á—à–∏—Ç—å –º–æ–¥–µ–ª—å:

```bash
# –î–æ–æ–±—É—á–µ–Ω–∏–µ –Ω–∞ –±–æ–ª—å—à–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —ç–ø–æ—Ö
.venv/bin/python train_yolo.py \
    --data datasets/merged_ball_dataset/data.yaml \
    --model runs/detect/ball_detector_quick/weights/last.pt \
    --epochs 100 \
    --name ball_detector_v2
```

–ù–æ —Å —Ç–µ–∫—É—â–∏–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ (99.5% mAP50) —ç—Ç–æ **–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è**!

---

## üìö –§–∞–π–ª—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```
runs/detect/ball_detector_quick/
‚îú‚îÄ‚îÄ weights/
‚îÇ   ‚îú‚îÄ‚îÄ best.pt          # –õ—É—á—à–∞—è –º–æ–¥–µ–ª—å (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç—É)
‚îÇ   ‚îî‚îÄ‚îÄ last.pt          # –ü–æ—Å–ª–µ–¥–Ω—è—è —ç–ø–æ—Ö–∞
‚îú‚îÄ‚îÄ results.csv          # –ú–µ—Ç—Ä–∏–∫–∏ –≤—Å–µ—Ö —ç–ø–æ—Ö
‚îú‚îÄ‚îÄ results.png          # –ì—Ä–∞—Ñ–∏–∫–∏ –æ–±—É—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ confusion_matrix.png # –ú–∞—Ç—Ä–∏—Ü–∞ –æ—à–∏–±–æ–∫
‚îî‚îÄ‚îÄ val_batch*.jpg       # –ü—Ä–∏–º–µ—Ä—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
```

---

## ‚úÖ –ò—Ç–æ–≥–∏

- ‚úÖ –ú–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞ –Ω–∞ 1467 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö
- ‚úÖ –î–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ —Ç–æ—á–Ω–æ—Å—Ç—å **99.5% mAP50**
- ‚úÖ –£—Å–ø–µ—à–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ì–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ production
- ‚úÖ –†–∞–∑–º–µ—Ä –≤—Å–µ–≥–æ **6 MB** - –ª–µ–≥–∫–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!** üéâ

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ê–Ω–∞–ª–∏–∑ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
./analyze.sh test_image.jpg

# 2. –ê–Ω–∞–ª–∏–∑ –≤–∞—à–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
./analyze.sh /–ø—É—Ç—å/–∫/–≤–∞—à–µ–º—É/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é.jpg

# 3. –ó–∞–ø—É—Å–∫ GUI
.venv/bin/python main.py

# 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ
./analyze.sh –≤–∏–¥–µ–æ.mp4 --video
```

**–£—Å–ø–µ—Ö–æ–≤ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏! ‚öΩüéæüèê**
