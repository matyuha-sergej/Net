# ‚úÖ –õ–û–ì–ò–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ê!

## –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞

**–ë—ã–ª–æ:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è –º—è—á–∞ (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ X-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç)  
**–°—Ç–∞–ª–æ:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–∑–º–µ—Ä–∞ –º—è—á–∞ (–∞–Ω–∞–ª–∏–∑ –≥–ª—É–±–∏–Ω—ã)

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å

### –§–∏–∑–∏–∫–∞ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã

```
       [–ö–∞–º–µ—Ä–∞]
          |
          | 2 –º–µ—Ç—Ä–∞
          |
          ‚Üì
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê  ‚Üê –°–µ—Ç–∫–∞ –≤–æ—Ä–æ—Ç
          ‚ïë
          ‚ïë 2-3 –º–µ—Ç—Ä–∞
          ‚ïë
          ‚Üì
```

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ß–µ–º –¥–∞–ª—å—à–µ –æ–±—ä–µ–∫—Ç –æ—Ç –∫–∞–º–µ—Ä—ã, —Ç–µ–º –º–µ–Ω—å—à–µ –æ–Ω –≤—ã–≥–ª—è–¥–∏—Ç.

- **–ú—è—á –ü–ï–†–ï–î —Å–µ—Ç–∫–æ–π** (2–º –æ—Ç –∫–∞–º–µ—Ä—ã) = **–ë–û–õ–¨–®–û–ô** (50-72 px)
- **–ú—è—á –ó–ê —Å–µ—Ç–∫–æ–π** (4-5–º –æ—Ç –∫–∞–º–µ—Ä—ã) = **–ú–ê–õ–ï–ù–¨–ö–ò–ô** (20-30 px)

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –¢–µ—Å—Ç | –†–∞–∑–º–µ—Ä –º—è—á–∞ | –†–µ–∑—É–ª—å—Ç–∞—Ç | –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å | –õ–æ–≥–∏—á–Ω–æ? |
|------|-------------|-----------|-------------|----------|
| 0 | 22.5 px | –ó–∞ —Å–µ—Ç–∫–æ–π | 85% | ‚úÖ |
| 1 | 20.0 px | –ó–∞ —Å–µ—Ç–∫–æ–π | 85% | ‚úÖ |
| 2 | 30.0 px | –ó–∞ —Å–µ—Ç–∫–æ–π | 53% | ‚úÖ |
| 3 | 60.5 px | **–ü–µ—Ä–µ–¥ —Å–µ—Ç–∫–æ–π** | 85% | ‚úÖ |
| 4 | 26.5 px | –ó–∞ —Å–µ—Ç–∫–æ–π | 75% | ‚úÖ |
| 10 | 67.0 px | **–ü–µ—Ä–µ–¥ —Å–µ—Ç–∫–æ–π** | 85% | ‚úÖ |
| 20 | 26.5 px | –ó–∞ —Å–µ—Ç–∫–æ–π | 75% | ‚úÖ |
| 30 | 36.0 px | –ó–∞ —Å–µ—Ç–∫–æ–π | 44% | ‚úÖ |
| 40 | 28.0 px | –ó–∞ —Å–µ—Ç–∫–æ–π | 57% | ‚úÖ |
| 50 | 26.5 px | –ó–∞ —Å–µ—Ç–∫–æ–π | 75% | ‚úÖ |

**–ò—Ç–æ–≥–æ:** 10/10 —Ç–µ—Å—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –ª–æ–≥–∏—á–Ω–æ! ‚úÖ

---

## –ü–æ—Ä–æ–≥–∏

### –¢–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
```python
size_threshold_far = 28 px   # –ú–µ–Ω—å—à–µ ‚Üí –ó–∞ —Å–µ—Ç–∫–æ–π
size_threshold_near = 48 px  # –ë–æ–ª—å—à–µ ‚Üí –ü–µ—Ä–µ–¥ —Å–µ—Ç–∫–æ–π
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏
- –ú–∏–Ω–∏–º—É–º: 22.5 px
- Q1 (25%): 26.5 px
- –ú–µ–¥–∏–∞–Ω–∞: 31.8 px
- Q3 (75%): 51.1 px
- –ú–∞–∫—Å–∏–º—É–º: 72 px

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```bash
./analyze.sh –≤–∞—à–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.jpg
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –º—è—á–µ–π: 1
–ú—è—á: bbox=(143, 520, 168, 540), confidence=0.92
–†–∞–∑–º–µ—Ä –º—è—á–∞: 25x20 px (–¥–∏–∞–º–µ—Ç—Ä: 22.5 px)
–°–µ—Ç–∫–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞

==================================================
–†–ï–ó–£–õ–¨–¢–ê–¢: –ó–∞ —Å–µ—Ç–∫–æ–π
–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 85.00%
==================================================

–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω: image_result.jpg
```

### –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –¥–ª—è –≤–∞—à–µ–π –∫–∞–º–µ—Ä—ã
```bash
.venv/bin/python calibrate_thresholds.py
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–æ—Ä–æ–≥–∏ –¥–ª—è –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–≤–µ—Å–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞** —Å —Ç—Ä–µ–º—è –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏:

### 1. –†–∞–∑–º–µ—Ä –º—è—á–∞ (–≤–µ—Å: 50%)
- < 28 px ‚Üí +0.5 –∫ "–∑–∞ —Å–µ—Ç–∫–æ–π"
- > 48 px ‚Üí +0.5 –∫ "–ø–µ—Ä–µ–¥ —Å–µ—Ç–∫–æ–π"
- 28-48 px ‚Üí –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è

### 2. Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ (–≤–µ—Å: 15-20%)
- Y < 0.4 (–≤–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å) ‚Üí +0.2 –∫ "–∑–∞ —Å–µ—Ç–∫–æ–π"
- Y > 0.4 (–Ω–∏–∂–Ω—è—è —á–∞—Å—Ç—å) ‚Üí +0.15 –∫ "–ø–µ—Ä–µ–¥ —Å–µ—Ç–∫–æ–π"

### 3. –û–∫–∫–ª—é–∑–∏—è —Å–µ—Ç–∫–æ–π (–≤–µ—Å: 10-30%)
- –ú–Ω–æ–≥–æ –ª–∏–Ω–∏–π ‚Üí –º—è—á –ø–µ—Ä–µ–∫—Ä—ã—Ç —Å–µ—Ç–∫–æ–π ‚Üí "–∑–∞ —Å–µ—Ç–∫–æ–π"
- –ú–∞–ª–æ –ª–∏–Ω–∏–π ‚Üí –º—è—á –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç ‚Üí "–ø–µ—Ä–µ–¥ —Å–µ—Ç–∫–æ–π"

---

## –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π:

- üü¢ **–ó–µ–ª–µ–Ω—ã–π** –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ = **–ü–µ—Ä–µ–¥ —Å–µ—Ç–∫–æ–π**
- üî¥ **–ö—Ä–∞—Å–Ω—ã–π** –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ = **–ó–∞ —Å–µ—Ç–∫–æ–π**
- üîµ **–ì–æ–ª—É–±–∞—è** –ª–∏–Ω–∏—è = –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è —Å–µ—Ç–∫–∞

---

## –§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| **LOGIC_EXPLAINED.md** | –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ |
| **UPDATES.md** | –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| **calibrate_thresholds.py** | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ |
| **position_analyzer.py** | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ |

---

## –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –°–∏—Ç—É–∞—Ü–∏—è 1: –ú–Ω–æ–≥–æ –æ—à–∏–±–æ–∫ "–ó–∞ —Å–µ—Ç–∫–æ–π"
```python
# –í position_analyzer.py —É–≤–µ–ª–∏—á—å—Ç–µ –ø–æ—Ä–æ–≥
size_threshold_far = 32  # –±—ã–ª–æ 28
```

### –°–∏—Ç—É–∞—Ü–∏—è 2: –ú–Ω–æ–≥–æ –æ—à–∏–±–æ–∫ "–ü–µ—Ä–µ–¥ —Å–µ—Ç–∫–æ–π"
```python
# –í position_analyzer.py —É–º–µ–Ω—å—à–∏—Ç–µ –ø–æ—Ä–æ–≥
size_threshold_near = 45  # –±—ã–ª–æ 48
```

### –°–∏—Ç—É–∞—Ü–∏—è 3: –ù—É–∂–Ω–∞ –ø–æ–ª–Ω–∞—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞ –≤–∞—à–∏—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö
.venv/bin/python calibrate_thresholds.py \
    --images –≤–∞—à–∞_–ø–∞–ø–∫–∞_—Å_—Ç–µ—Å—Ç–∞–º–∏

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –≤—ã–≤–æ–¥–∞
```

---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è:**
- –ö–∞–º–µ—Ä–∞ –∑–∞ –≤–æ—Ä–æ—Ç–∞–º–∏ (2-3 –º–µ—Ç—Ä–∞)
- –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –¥–ª—è —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤
- –ù–æ—Ä–º–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç–∏–≤—ã (–±–µ–∑ —Å–∏–ª—å–Ω—ã—Ö –∏—Å–∫–∞–∂–µ–Ω–∏–π)

‚ùå **–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è:**
- –ö–∞–º–µ—Ä–∞ —Å–±–æ–∫—É –æ—Ç –≤–æ—Ä–æ—Ç (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `camera_position='side'`)
- –û—á–µ–Ω—å –Ω–∏–∑–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
- –¢–µ–ª–µ–æ–±—ä–µ–∫—Ç–∏–≤—ã (—Å–ª–∞–±–∞—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞)

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `position_analyzer.py` - –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞
- `cli.py` - –¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–≤–æ–¥ —Ä–∞–∑–º–µ—Ä–∞ –º—è—á–∞
- `README.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ
- `CHEATSHEET.md` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `calibrate_thresholds.py` - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏
- `LOGIC_EXPLAINED.md` - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ
- `UPDATES.md` - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `FIXED.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

---

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö
for i in {0..4}; do
    ./analyze.sh datasets/merged_ball_dataset/images/test/test_$(printf "%06d" $i).jpg
done
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ:
- –ú–∞–ª–µ–Ω—å–∫–∏–µ –º—è—á–∏ (< 30 px) ‚Üí "–ó–∞ —Å–µ—Ç–∫–æ–π" ‚úÖ
- –ë–æ–ª—å—à–∏–µ –º—è—á–∏ (> 50 px) ‚Üí "–ü–µ—Ä–µ–¥ —Å–µ—Ç–∫–æ–π" ‚úÖ
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ª–æ–≥–∏—á–Ω—ã ‚úÖ

---

## –ò—Ç–æ–≥–∏

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–ª–æ–∂–µ–Ω–∏—è
- –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –ø–æ–¥ –≤–∞—à—É –∫–∞–º–µ—Ä—É
- –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ:
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –û—Ç–ª–∞–¥–æ—á–Ω—ã–π –≤—ã–≤–æ–¥

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:
–°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–ª–æ–∂–µ–Ω–∏–µ –º—è—á–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å–µ—Ç–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∏–∑–∏–∫–∏ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã!

---

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:** `./analyze.sh –≤–∞—à–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.jpg`  
**–ö–∞–ª–∏–±—Ä—É–π—Ç–µ:** `.venv/bin/python calibrate_thresholds.py`  
**–ò–∑—É—á–∞–π—Ç–µ:** `LOGIC_EXPLAINED.md`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!
